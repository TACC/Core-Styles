@import url('../tools/x-truncate.css');

/* Basic */

table {
  --thead-height: 33px; /* manually calculated *//* used for "Nested" table */

  border-collapse: collapse; /* copied from Bootstrap 4.0.0 */

  font-family: var(--global-font-family--sans--portal);
  font-size: var(--global-font-size--small);
}

thead tr,
tr:not(:last-of-type) {
  border-bottom: var(--global-border--normal);
}
tr:nth-child(even) {
  background: var(--global-color-primary--x-light);
}

th,
td {
  vertical-align: top;
  padding-block: 8px;
  padding-inline: 16px;

  color: var(--global-color-primary--dark);

  /* To ensure <thead> height matches between browsers */
  /* FAQ: A line-height > font-size accomodates ascender & descender letters */
  /* HACK: Units for line-height are discouraged */
  /* NOTE: Firefox and Chrome give different height if unit-less line-height */
  line-height: var(--global-font-size--medium);
}

th {
  color: var(--global-color-primary--x-dark);

  text-align: inherit; /* copied from Bootstrap 4.0.0 */
}
thead > tr > th {
  font-weight: var(--bold);
}
tbody > tr > th {
  font-weight: var(--normal);
}

/* To override browser */
td ul {
  list-style: none;
  padding-inline-start: 0;
  margin-block: 0;
}
td li:not(:last-of-type) {
  margin-bottom: 0.25em;
}
td button {
  font-size: inherit;
}

caption {
  font-size: var(--global-font-size--small);
  text-align: unset; /* undo Bootstrap _reboot.css */
}



/* Nested */

table.has-nested-table :is(td, th) {
  white-space: nowrap;
}

td:has(table) {
  padding: 0;
}
/* https://caniuse.com/css-has */
td.has-table {
  padding: 0;
}

/* To replace parent table columns above with nested table columns */
/* FAQ: Pulls nested table up by the height of the parent table head */
tr table {
  --offset: calc(-1 * var(--thead-height));

  transform: translateY(var(--offset));
  margin-bottom: var(--offset);
}
/* FAQ: Hides any parent table head underneath nested table head */
tr:first-of-type thead {
  background: var(--global-color-background--app);
}
/* FAQ: Hides all successive (thus redundant) nested table heads */
tr:not(:first-of-type) thead {
  visibility: hidden;
}

/* To reduce inline padding
   at start and end of nested table
   unless at start or end of parent table */
td:not(:first-child) th:first-child,
td:not(:first-child) td:first-child {
  padding-inline-start: 8px;
}
td:not(:last-child) th:last-child,
td:not(:last-child) td:last-child {
  padding-inline-end: 8px;
}
